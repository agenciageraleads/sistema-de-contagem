
> contagem-ciclica-backend@1.0.0 test:e2e
> jest --config ./test/jest-e2e.json sankhya-note-sim.e2e-spec.ts

  console.error
    üîç INFO DOS TOPS (TGFTOP): [
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      },
      {
        "CODTIPOPER": 221,
        "TIPMOV": "C",
        "DESCROPER": "AJUSTE DE ESTOQUE MANUAL - ENTRADA"
      }
    ]

      30 |             // TGFTOP √© a tabela de Tipos de Opera√ß√£o (n√£o TGFTPV)
      31 |             const tops = await sankhyaClient.executeQuery("SELECT CODTIPOPER, TIPMOV, DESCROPER FROM TGFTOP WHERE CODTIPOPER IN (221, 1221)");
    > 32 |             console.error('üîç INFO DOS TOPS (TGFTOP):', JSON.stringify(tops, null, 2));
         |                     ^
      33 |
      34 |             // Ver uso real
      35 |             const uso221 = await sankhyaClient.executeQuery("SELECT TIPMOV, COUNT(*) as QTD FROM TGFCAB WHERE CODTIPOPER = 221 GROUP BY TIPMOV");

      at Object.<anonymous> (sankhya-note-sim.e2e-spec.ts:32:21)

  console.error
    üîç USO TOP 221: [
      {
        "TIPMOV": "C",
        "QTD": 1743
      },
      {
        "TIPMOV": "Z",
        "QTD": 1
      }
    ]

      34 |             // Ver uso real
      35 |             const uso221 = await sankhyaClient.executeQuery("SELECT TIPMOV, COUNT(*) as QTD FROM TGFCAB WHERE CODTIPOPER = 221 GROUP BY TIPMOV");
    > 36 |             console.error('üîç USO TOP 221:', JSON.stringify(uso221, null, 2));
         |                     ^
      37 |
      38 |             const uso1221 = await sankhyaClient.executeQuery("SELECT TIPMOV, COUNT(*) as QTD FROM TGFCAB WHERE CODTIPOPER = 1221 GROUP BY TIPMOV");
      39 |             console.error('üîç USO TOP 1221:', JSON.stringify(uso1221, null, 2));

      at Object.<anonymous> (sankhya-note-sim.e2e-spec.ts:36:21)

  console.error
    üîç USO TOP 1221: []

      37 |
      38 |             const uso1221 = await sankhyaClient.executeQuery("SELECT TIPMOV, COUNT(*) as QTD FROM TGFCAB WHERE CODTIPOPER = 1221 GROUP BY TIPMOV");
    > 39 |             console.error('üîç USO TOP 1221:', JSON.stringify(uso1221, null, 2));
         |                     ^
      40 |         } catch (e) {
      41 |             console.error('Falha ao consultar DEBUG:', e);
      42 |         }

      at Object.<anonymous> (sankhya-note-sim.e2e-spec.ts:39:21)

FAIL test/sankhya-note-sim.e2e-spec.ts (9.134 s)
  Simula√ß√£o de Nota de Ajuste Real (MGECOM)
    ‚úï Deve tentar criar nota real usando o m√≥dulo MGECOM (9 ms)

  ‚óè Simula√ß√£o de Nota de Ajuste Real (MGECOM) ‚Ä∫ Deve tentar criar nota real usando o m√≥dulo MGECOM

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      15 |     let sankhyaClient: SankhyaClient;
      16 |
    > 17 |     beforeAll(async () => {
         |     ^
      18 |         const moduleFixture: TestingModule = await Test.createTestingModule({
      19 |             imports: [AppModule],
      20 |         }).compile();

      at sankhya-note-sim.e2e-spec.ts:17:5
      at Object.<anonymous> (sankhya-note-sim.e2e-spec.ts:11:1)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 total
Snapshots:   0 total
Time:        13.521 s
Ran all test suites matching sankhya-note-sim.e2e-spec.ts.
